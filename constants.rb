require 'set'

DEFAULT_AVATAR_EYELINE_POSITION = JSON.parse('{"adlungda":0.28994082840236685,"ahrensja":0.4423913043478261,"ahrensjo1":0.31470588235294117,"ahrensst":0.36945304437564497,"altbe":0.35,"barthni":0.37699203187250996,"baumma":0.35,"bednarad":0.32978723404255317,"berndtke":0.30959752321981426,"bertscma":0.38811881188118813,"binderse":0.31910352187833513,"blumesi":0.42,"bortelle":0.30425963488843816,"brassro":0.4,"braunro":0.3068756319514661,"broderti":0.3493975903614458,"burgahva":0.425,"burgerma":0.3705179282868526,"cussaceg":0.3994818652849741,"demskiph":0.47,"desligis":0.3645418326693227,"diebelph":0.3166496424923391,"diekmajo":0.32169868554095043,"doerinja":0.35,"doersafe":0.35,"doldtva":0.42531050688150385,"eberhada":0.4,"elgogoli":0.3388773388773389,"erdmanli":0.37952662721893493,"espefr":0.40,"famalo":0.3664563617245005,"feyjo":0.35,"freytada":0.39978331527627303,"friebosa":0.2916666666666667,"fuerbaal":0.3010700389105058,"glutscse":0.3358695652173913,"goerkeja":null,"grossma":0.34014300306435136,"grunzva":0.3457172342621259,"guenthja":0.34994582881906827,"haitzth":0.6344492440604752,"halaszev":0.3533678756476684,"haliloam":0.3148148148148148,"hantscjo":0.34424603174603174,"happleva":0.2748478701825558,"heckelle":0.4,"henkensa":0.24454365079365079,"herzogfr":0.27459016393442626,"hoffmale":0.23564356435643563,"hoffmama":0.28498985801217036,"hoffmelo":0.35,"ihlingju":0.4,"ingentjo":0.3596112311015119,"jakobka":0.39456521739130435,"janosoka":0.2940584088620342,"johnerph":0.4,"jurgscpa":0.3393574297188755,"kappenla":0.42,"keilbasa":0.387434554973822,"kellertr":0.3473118279569892,"krafftju":0.40007502679528403,"kraifra":0.34,"kramerlu":null,"kraussre":0.27450980392156865,"kulpast":0.2981072555205047,"kummerhe":0.64,"kunstqu":0.3544559585492228,"lappena":0.3997328244274809,"lauberlu":0.32429718875502006,"lehmanma":0.3442982456140351,"leikerch":0.3494059405940594,"lenzlu":0.3649236641221374,"mahlerda":0.3796394485683987,"maierna":0.3478217821782178,"masuchpa":0.3090717299578059,"mavridch":0.25,"mbalapr":0.4,"mehlhajo":null,"meissnna":0.3547011952191235,"mengesan":0.35699797160243407,"mercanze":0.38,"mickelja":0.34980392156862746,"milgerth":0.38963114754098363,"moellefa":null,"moyrerma":0.3263457760314342,"neidhach":0.34407484407484407,"nguetsva":null,"nowocipa":0.3991462113127001,"petrasju":null,"pfirrmmi":null,"phanthsa":0.34204909284951973,"raafbe":0.34944612286002014,"rayhermi":0.401658189216684,"reichefa":0.48,"reicheni":0.38,"reinhaca":0.33423618634886243,"reissimi":0.29657603222557904,"reistesa":null,"reithme":0.33941176470588234,"renkerje":0.2797427652733119,"rennervi":0.31623505976095617,"richtesa":0.38453713123092575,"rodrigjo":0.3092369477911647,"rubyan":null,"sailerma":0.3365487674169346,"saurde":null,"schaefti":0.44,"schalwme":0.3343022136669875,"schauban":null,"schmiger":0.3745677694770544,"schneijo":0.3,"schoepre":0.33457943925233646,"schubakr":0.41,"schubale":0.37945066124109866,"schuckpa":0.24913378248315688,"serafiju":0.27848101265822783,"sickka":0.30349794238683125,"strausfe":0.3290460878885316,"talleuse":0.31617161716171616,"tazeme":0.37980676328502416,"thalma":0.450322580645161,"tothpa":null,"trodlela":0.3390844354018311,"troesja":0.34282700421940926,"uenalde":0.26,"urbanbe":null,"vanhofhe":0.3693989071038251,"waeldean":0.4,"wallbami":0.30760956175298807,"warmutlu":0.44,"weberha":0.34980392156862746,"weberpi":0.3481036077705825,"wegneral":0.3,"weilerki":0.45,"werrnal":null,"wessinin":0.325593395252838,"wetzelma":0.4,"widmeral":0.33872598584428715,"winteran":null,"wolffrda":0.3691983122362869,"wolfpa":0.3,"wolfstjo":0.4891238670694864,"wottrilu":0.333,"zarbaler":0.2,"zenkju":0.3143646408839779,"zielfa":null,"zimmerno":0.3543767060964513,"zobersal":0.41,"zoellest":0.3} ')
PATRONS_MAP = JSON.parse('{"adlungda":["desligis"],"ahrensja":["zenkju","feyjo"],"ahrensjo1":["kraifra"],"ahrensst":["schmiger"],"altbe":["mickelja"],"barthni":["diebelph","feyjo","grossma","schneijo"],"baumma":["altbe","kellertr"],"bednarad":["serafiju"],"berndtke":["tazeme","feyjo","espefr"],"bertscma":["brassro","haliloam"],"binderse":["hoffmama"],"blumesi":["wallbami"],"bortelle":["erdmanli"],"brassro":["haliloam","bertscma","kummerhe"],"braunro":["burgahva","lappena"],"broderti":["raafbe"],"burgahva":["kraussre"],"burgerma":["neidhach","elgogoli"],"cussaceg":[],"demskiph":["serafiju"],"desligis":["schuckpa","krafftju"],"diebelph":["altbe"],"diekmajo":["zoellest"],"doerinja":[],"doersafe":["weberpi"],"doldtva":["schubale","wottrilu","mbalapr","grossma"],"eberhada":["reicheni","guenthja"],"elgogoli":["burgerma","goerkeja"],"erdmanli":["richtesa","saurde","renkerje","wallbami"],"espefr":["werrnal","haitzth"],"famalo":["serafiju"],"feyjo":["zobersal","thalma"],"freytada":["weberpi"],"friebosa":["wolfpa"],"fuerbaal":["mercanze"],"glutscse":["mahlerda"],"goerkeja":["strausfe","elgogoli","rayhermi"],"grossma":["schubale","wottrilu","mbalapr","doldtva"],"grunzva":["renkerje"],"guenthja":["reicheni"],"haitzth":["espefr"],"halaszev":["wolfstjo","talleuse","schubakr"],"haliloam":["brassro","masuchpa"],"hantscjo":["heckelle"],"happleva":["famalo"],"heckelle":["schauban"],"henkensa":["kraussre"],"herzogfr":["schoepre","strausfe"],"hoffmale":["wolfpa"],"hoffmama":["serafiju"],"hoffmelo":["moyrerma"],"ihlingju":["janosoka"],"ingentjo":["adlungda"],"jakobka":["henkensa"],"janosoka":["heckelle"],"johnerph":["wetzelma"],"jurgscpa":["cussaceg"],"kappenla":["hoffmama","trodlela","keilbasa"],"keilbasa":["sailerma","zielfa","zoellest","kulpast"],"kellertr":["baumma"],"krafftju":["trodlela","bortelle"],"kraifra":["wetzelma","feyjo","ahrensjo1"],"kramerlu":["kummerhe"],"kraussre":["burgahva","henkensa","jakobka","urbanbe"],"kulpast":["keilbasa"],"kummerhe":["widmeral","burgahva","wallbami"],"kunstqu":["wetzelma","feyjo","ihlingju"],"lappena":["weilerki","neidhach"],"lauberlu":["henkensa","feyjo"],"lehmanma":["sailerma"],"leikerch":["erdmanli","richtesa","saurde"],"lenzlu":["cussaceg"],"mahlerda":["weilerki"],"maierna":["waeldean","lauberlu","nguetsva"],"masuchpa":["weberpi","feyjo","wessinin","ingentjo"],"mavridch":["guenthja"],"mbalapr":["grossma","schubale","wottrilu","doldtva"],"mehlhajo":["wolffrda"],"meissnna":["lehmanma","wolfstjo"],"mengesan":["fuerbaal"],"mercanze":["fuerbaal"],"mickelja":["renkerje","altbe","diebelph","haitzth","leikerch"],"milgerth":["zielfa","masuchpa"],"moellefa":["trodlela"],"moyrerma":["hoffmelo","cussaceg","feyjo"],"neidhach":["herzogfr"],"nguetsva":["maierna","waeldean"],"nowocipa":[],"petrasju":["uenalde","vanhofhe"],"pfirrmmi":["tazeme","schalwme"],"phanthsa":["winteran","schoepre"],"raafbe":["adlungda","feyjo"],"rayhermi":["weberha"],"reichefa":["renkerje"],"reicheni":["guenthja"],"reinhaca":["baumma","kellertr"],"reissimi":["tazeme","weberpi","uenalde","schalwme"],"reistesa":["zoellest"],"reithme":["wessinin","blumesi"],"renkerje":["wolfpa"],"rennervi":["sailerma","wegneral","heckelle"],"richtesa":["erdmanli","wallbami","saurde","feyjo","renkerje"],"rodrigjo":["uenalde","wegneral"],"rubyan":["weberpi"],"sailerma":["keilbasa","wegneral"],"saurde":["richtesa","renkerje","hoffmale"],"schaefti":["doersafe","freytada"],"schalwme":["weberpi","feyjo","moyrerma"],"schauban":["heckelle","rennervi"],"schmiger":["kunstqu"],"schneijo":["weberpi","brassro","feyjo","schoepre"],"schoepre":["phanthsa"],"schubakr":["wolfstjo","talleuse","halaszev"],"schubale":["mbalapr"],"schuckpa":["grossma","weberpi","feyjo","schauban"],"serafiju":["hoffmama"],"sickka":["serafiju"],"strausfe":["goerkeja","zielfa"],"talleuse":["wolfstjo","schubakr","halaszev"],"tazeme":["wolfpa"],"thalma":["zobersal","feyjo"],"tothpa":["zielfa","feyjo","kellertr"],"trodlela":["bortelle"],"troesja":["leikerch"],"uenalde":["petrasju","vanhofhe"],"urbanbe":["brassro","grossma","henkensa"],"vanhofhe":["petrasju","feyjo","uenalde"],"waeldean":["lauberlu"],"wallbami":["erdmanli","kummerhe","urbanbe","feyjo","richtesa"],"warmutlu":["schneijo"],"weberha":["rayhermi","goerkeja"],"weberpi":["wegneral","schneijo"],"wegneral":["rennervi","weberpi"],"weilerki":["werrnal","lappena"],"werrnal":["zimmerno","espefr"],"wessinin":["reithme","wegneral","winteran"],"wetzelma":["johnerph","kraifra"],"widmeral":["guenthja"],"winteran":["weberpi","wegneral","adlungda","haitzth","schoepre"],"wolffrda":["mehlhajo"],"wolfpa":["friebosa","hoffmale"],"wolfstjo":["talleuse"],"wottrilu":["schubale","doldtva","mbalapr","grossma"],"zarbaler":[],"zenkju":["elgogoli","grossma","rubyan"],"zielfa":["weberpi","feyjo","schoepre"],"zimmerno":["mercanze"],"zobersal":["feyjo"],"zoellest":["reistesa"]}')
SYMMETRICAL_CONNECTION_MAP = PATRONS_MAP.reduce({}) do |acc, person|
  person.last.each do |author|
    acc[author] ||= Set.new
    acc[author].add(person.first)

    acc[person.first] ||= Set.new
    acc[person.first].add(author)
  end

  acc
end
